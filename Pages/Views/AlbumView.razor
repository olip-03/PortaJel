@using PortaJel_Blazor.Data;
@page "/AlbumView/{albumId}"

<div class="imageContainer">
    @if(album != null)
    {
        <img src="@album.imageSrc" class="albumImage" />
    }
    else
    {
        <img src="" class="albumImage" />
    }
</div>

@if(album!=null)
{
    <h1>@album.name</h1>
    <div class="artistInfo">
        <div class="user-profile">@album.artists.FirstOrDefault().imgSrc</div>
        @album.GetArtistName()
    </div>

    foreach (var item in album.songs)
    {
        <hr />
        <div>            
            <p style="margin:0px;">@item.name</p>
            <p style="margin:0px;color:darkgray">@item.artist</p>
        </div>
    }
    <hr />
}

@code {
    [Parameter] public string albumId { get; set; }

    private Album album { get; set; } 

    protected override async Task OnInitializedAsync()
    {
        MauiProgram.mainLayout.showHeader = false;

        Guid parseId = Guid.Parse(albumId);
        if (albumId != null)
        {
            album = await MauiProgram.servers[0].FetchAlbumByIDAsync(parseId);
            StateHasChanged();
        }
    }

    private void GoBack()
    {
        // goBack.GoBackInTime();
    }
}

